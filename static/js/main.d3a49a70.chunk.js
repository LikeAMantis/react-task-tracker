(this["webpackJsonpreact-task-tracker"]=this["webpackJsonpreact-task-tracker"]||[]).push([[0],{28:function(t,e,n){},31:function(t,e,n){"use strict";n.r(e);var a=n(1),c=n.n(a),r=n(11),s=n.n(r),i=(n(28),n(7)),o=n.n(i),l=n(8),u=n(5),d=n(17),j=n(9),b=n(23),f=n(3),O=n(16),p=n(21),h=n(13),x=n(22),m=n(19),v=n(2),g=Object(a.forwardRef)((function(t,e){var n=t.taskData,c=t.onDelete,r=t.onEdit,s=t.attributes,i=t.listeners,o=t.style,l=Object(a.useState)(n.text),d=Object(u.a)(l,2),j=d[0],b=d[1];return Object(v.jsxs)("div",{className:"taskContainer",ref:e,style:o,children:[Object(v.jsx)(O.a,Object(f.a)(Object(f.a)({className:"dragHandle"},i),s)),Object(v.jsx)("div",{className:"checkbox",onClick:function(){return r(Object(f.a)(Object(f.a)({},n),{},{done:!n.done}))},children:n.done&&Object(v.jsx)(m.a,{style:{color:"red"}})}),Object(v.jsx)("input",{className:"task",style:n.done?{textDecorationLine:"line-through",color:"grey"}:null,value:j,onChange:function(t){return b(t.target.value)},onBlur:function(){return r(Object(f.a)(Object(f.a)({},n),{},{text:j}))},onKeyDown:function(t){return function(t){"Enter"!==t.code&&"Escape"!==t.code||t.target.blur()}(t)}}),Object(v.jsx)(h.a,{className:"del-icon",onClick:function(t){t.stopPropagation(),c(n.id),console.log("deleteTask")}})]})})),k=n(10),y=n(4),C=function(t){var e=Object(k.d)({id:t.taskData.id}),n=e.attributes,a=e.listeners,c=e.setNodeRef,r=e.transform,s=e.transition,i={transform:y.a.Transform.toString(r),transition:s};return Object(v.jsx)(g,Object(f.a)(Object(f.a)({ref:c},t),{},{style:t.isDragged?Object(f.a)(Object(f.a)({},i),{},{background:"lightgrey"}):i,attributes:n,listeners:a}))},N=n(20),w=function(t){var e=t.onAdd,n=t.text,c=t.style,r=Object(a.useState)(""),s=Object(u.a)(r,2),i=s[0],o=s[1],l=Object(a.useState)(!1),d=Object(u.a)(l,2),j=d[0],b=d[1];function f(){e(i),o(""),b(!1)}return Object(v.jsx)(v.Fragment,{children:j?Object(v.jsxs)("div",{children:[Object(v.jsx)("input",{ref:function(t){return t&&t.focus()},onKeyDown:function(t){return function(t){"Enter"===t.code?(f(),b(!1)):"Escape"===t.code&&b(!1)}(t)},onChange:function(t){o(t.target.value)},value:i,placeholder:n}),Object(v.jsxs)("div",{children:[Object(v.jsx)("button",{className:"save-btn",onClick:f,children:"Save"}),Object(v.jsx)("button",{onClick:function(){return b(!1)},children:"Cancel"})]})]}):Object(v.jsxs)("div",{className:"add-btn",style:c,onClick:function(){return b(!0)},children:[Object(v.jsx)(N.a,{}),Object(v.jsx)("span",{children:n})]})})},S=function(t){var e=t.tasksCategorie,n=t.onEdit,a=t.onClose,c=t.wrapper,r=t.colors;return s.a.createPortal(Object(v.jsx)("div",{className:"colorPicker",style:{left:c.getBoundingClientRect().left+"px",top:c.getBoundingClientRect().top+20+"px"},ref:function(t){return t&&t.focus()},tabIndex:"0",onClick:function(t){return function(t){t.stopPropagation(),t.target.hasAttribute("title")&&(n(Object(f.a)(Object(f.a)({},e),{},{colorId:parseInt(t.target.dataset.id)})),a(!1))}(t)},onBlur:function(){return a(!1)},children:r.map((function(t){return Object(v.jsx)("div",{title:t.name,"data-id":t.id,style:{background:"var(--".concat(t.name,")")}},"color-".concat(t.id))}))}),document.body)},E=function(t){var e=t.labels,n=t.onClose,a=t.onEdit,c=t.tasksCategorie;return Object(v.jsxs)("div",{className:"labelPicker",style:{position:"relative"},ref:function(t){return t&&t.focus()},tabIndex:"0",onClick:function(t){return function(t){t.stopPropagation();var e=t.target.dataset.id;e=null!=e&&parseInt(t.target.dataset.id),a(Object(f.a)(Object(f.a)({},c),{},{labelId:e})),n(!1)}(t)},onBlur:function(){return n(!1)},children:[Object(v.jsx)("div",{children:"none"}),e.map((function(t){return Object(v.jsx)("div",{"data-id":t.id,children:t.name},"label-".concat(t.id))}))]})},D=n(6),I=function(t){var e=t.tasksCategorie,n=t.tasksData,c=t.onDelete,r=t.onEdit,s=t.colors,i=t.labels,d=Object(a.useState)(n),b=Object(u.a)(d,2),m=b[0],N=b[1],I=Object(a.useState)(!1),T=Object(u.a)(I,2),P=T[0],A=T[1],B=Object(a.useState)(!1),F=Object(u.a)(B,2),J=F[0],R=F[1],L=Object(a.useState)(!1),K=Object(u.a)(L,2),U=K[0],G=K[1],H=Object(a.useState)(e.name),z=Object(u.a)(H,2),M=z[0],W=z[1],q=Object(a.useRef)(),Q=Object(a.useRef)(),V=Object(a.useState)(null),X=Object(u.a)(V,2),Y=X[0],Z=X[1],$=Object(D.o)(Object(D.n)(D.e),Object(D.n)(D.d,{coordinateGetter:k.c})),_=Object(k.d)({id:e.id}),tt=_.attributes,et=_.listeners,nt=_.setNodeRef,at=_.transform,ct=_.transition,rt={transform:y.a.Translate.toString(at),transition:ct};function st(){return(st=Object(l.a)(o.a.mark((function t(n){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,it({tasksCategorieId:e.id,done:!1,text:n});case 2:a=t.sent,N([].concat(Object(j.a)(m),[a]));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function it(t){return ot.apply(this,arguments)}function ot(){return(ot=Object(l.a)(o.a.mark((function t(e){var n,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:5000/tasks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});case 2:return n=t.sent,t.next=5,n.json();case 5:return a=t.sent,console.log(a),t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function lt(t){return ut.apply(this,arguments)}function ut(){return(ut=Object(l.a)(o.a.mark((function t(e){var n,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:5000/tasks/".concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});case 2:return n=t.sent,t.next=5,n.json();case 5:a=t.sent,N(m.map((function(t){return t.id===e.id?a:t})));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function dt(t){return jt.apply(this,arguments)}function jt(){return(jt=Object(l.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:5000/tasks/".concat(e),{method:"DELETE"});case 2:200===t.sent.status&&N(m.filter((function(t){return t.id!==e})));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function bt(){0===M.length?alert("Enter a Name!"):(r(Object(f.a)(Object(f.a)({},e),{},{name:M})),A(!1))}function ft(){0===M.length?alert("Enter a Name!"):(A(!1),W(q.current))}function Ot(t){Z(t.active.id)}function pt(t){var e=t.active,n=t.over;if(e.id!==n.id){var a=m.findIndex((function(t){return t.id===e.id})),c=m.findIndex((function(t){return t.id===n.id}));N(Object(k.b)(m,a,c))}Z(null)}return Object(v.jsx)("div",{ref:nt,style:Object(f.a)({},rt),children:Object(v.jsxs)("div",{className:"categoryWrapper",style:{background:"var(--".concat(s.find((function(t){return t.id===e.colorId})).name,")")},children:[Object(v.jsx)(O.a,Object(f.a)(Object(f.a)(Object(f.a)({className:"dragHandle"},et),tt),{},{tabIndex:"false"})),Object(v.jsxs)("div",{className:"editCategory-container",ref:Q,children:[Object(v.jsx)(p.a,{className:"colorPicker-btn",onClick:function(){return R(!0)},tabIndex:"0"}),J&&Object(v.jsx)(S,{tasksCategorie:e,onEdit:r,onClose:R,wrapper:Q.current,colors:s}),Object(v.jsx)(h.a,{className:"del-icon",onClick:function(){c(e.id),A(!1)}})]}),P?Object(v.jsxs)("div",{children:[Object(v.jsx)("input",{ref:function(t){return t&&t.focus()},placeholder:"New Category",onKeyDown:function(t){return function(t){"Enter"===t.code?(r(Object(f.a)(Object(f.a)({},e),{},{name:M})),A(!1)):"Escape"===t.code&&A(!1)}(t)},onChange:function(t){return W(t.target.value)},value:M,style:{height:"1.5em",width:"96%"}}),Object(v.jsxs)("div",{className:"btnContainer",children:[Object(v.jsx)("button",{className:"save-btn",onClick:bt,children:"Save"}),Object(v.jsx)("button",{onClick:ft,children:"Cancel"})]})]}):Object(v.jsx)("h2",{className:"categoryTitle",onClick:function(){A(!0),q.current=M},children:e.name}),Object(v.jsx)("div",{className:"tasks",children:m.length>0?Object(v.jsxs)(D.a,{sensors:$,collisionDetection:D.f,onDragEnd:pt,onDragStart:Ot,children:[Object(v.jsx)(k.a,{items:m,strategy:k.e,children:m.map((function(t){return Object(v.jsx)(C,{taskData:t,onEdit:lt,onDelete:dt,isDragged:Y===t.id},"task-".concat(t.id))}))}),Object(v.jsx)(D.b,{style:{background:"inherit"},children:Y?Object(v.jsx)(g,{taskData:m.find((function(t){return t.id===Y}))}):null})]}):Object(v.jsx)("p",{children:"Tasks"})}),Object(v.jsx)("div",{className:"label",onClick:function(){return G(!0)},children:U?Object(v.jsx)(E,{tasksCategorie:e,onEdit:r,onClose:G,labels:i}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(x.a,{className:"label-btn"}),Object(v.jsx)("span",{children:function(){var t=i.find((function(t){return t.id===e.labelId}));if(null!=t)return t.name}()})]})}),Object(v.jsx)(w,{onAdd:function(t){return st.apply(this,arguments)},text:"Add Task"})]})})},T=function(t){var e=t.data,n=t.filterState,c=Object(a.useState)(e.tasksCategories),r=Object(u.a)(c,2),s=r[0],i=r[1],d=Object(D.o)(Object(D.n)(D.e),Object(D.n)(D.d,{coordinateGetter:k.c}));function f(){return f=Object(l.a)(o.a.mark((function t(){var e,a,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={name:"New",colorId:1,labelId:!1},"all"!==n.type&&(e[n.type+"Id"]=n.value),t.next=4,fetch("http://localhost:5000/tasksCategories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});case 4:return a=t.sent,t.next=7,a.json();case 7:c=t.sent,i([].concat(Object(j.a)(s),[c]));case 9:case"end":return t.stop()}}),t)}))),f.apply(this,arguments)}function O(t){return p.apply(this,arguments)}function p(){return(p=Object(l.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:5000/tasksCategories/".concat(e),{method:"DELETE"});case 2:200===t.sent.status&&i(s.filter((function(t){return t.id!==e})));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function h(t){return x.apply(this,arguments)}function x(){return x=Object(l.a)(o.a.mark((function t(e){var n,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:5000/tasksCategories/".concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});case 2:return n=t.sent,t.next=5,n.json();case 5:a=t.sent,console.log(a),i(s.map((function(t){return t.id===e.id?a:t})));case 8:case"end":return t.stop()}}),t)}))),x.apply(this,arguments)}function m(t){var e=t.active,n=t.over;if(e.id!==n.id){var a=s.findIndex((function(t){return t.id===e.id})),c=s.findIndex((function(t){return t.id===n.id}));i(Object(k.b)(s,a,c))}}var g=function(){return("all"===n.type?s:s.filter((function(t){return t[n.type+"Id"]===n.value}))).map((function(t){return Object(v.jsx)(I,{tasksCategorie:t,tasksData:e.tasks.filter((function(e){return e.tasksCategorieId===t.id})),onDelete:O,onEdit:h,colors:e.colors,labels:e.labels},"Categorie-".concat(t.id))}))};return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{className:"TaskCategoriesContainer",children:[Object(v.jsx)("div",{className:"flexContainer",children:s.length>0?Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(D.a,{sensors:d,collisionDetection:D.f,onDragEnd:m,children:Object(v.jsx)(k.a,{items:s,children:Object(v.jsx)(g,{})})})}):"No Categories added yet!"}),Object(v.jsx)("hr",{size:"1",width:"90%",color:"black"}),Object(v.jsxs)("div",{id:"addCategory",onClick:function(){return f.apply(this,arguments)},children:[Object(v.jsx)(b.a,{}),Object(v.jsx)("span",{children:"Add Category"})]})]})})},P=n(14),A=function(t){var e=t.type,n=t.children,a=t.setFilterState;return Object(v.jsxs)("section",{children:[Object(v.jsx)("h3",{style:{background:"black",color:"white"},children:(e+"'s").toUpperCase()}),Object(v.jsx)("div",{onClick:function(t){return function(t){var n=t.target.dataset.id;void 0!==n&&a({type:e,value:parseInt(n)})}(t)},children:n})]})},B=["data"],F=function(t){var e=t.data,n=Object(P.a)(t,B),c=Object(a.useState)(e.labels),r=Object(u.a)(c,2),s=r[0],i=r[1];function b(){return(b=Object(l.a)(o.a.mark((function t(e){var n,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:5000/labels",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e})});case 2:return n=t.sent,t.next=5,n.json();case 5:a=t.sent,i([].concat(Object(j.a)(s),[a]));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function O(){return(O=Object(l.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:5000/labels/".concat(e),{method:"DELETE"});case 2:200===t.sent.status&&i(s.filter((function(t){return t.id!==e})));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(v.jsxs)("div",{className:"sideBar",children:[Object(v.jsxs)("div",{className:"sideBar-header",children:[Object(v.jsx)(d.a,{}),Object(v.jsx)("span",{children:"Filter"})]}),Object(v.jsx)("div",{className:"filterOption",style:{marginBottom:"15px"},onClick:function(){return n.setFilterState({type:"all"})},children:"All"}),Object(v.jsx)(A,Object(f.a)(Object(f.a)({},n),{},{type:"color",children:e.colors&&e.colors.map((function(t){return Object(v.jsx)("div",{className:"filterOption",style:{background:"var(--".concat(t.name,")"),color:"black"},"data-id":t.id,children:t.name},"filterOption-".concat(t.id))}))})),Object(v.jsx)(A,Object(f.a)(Object(f.a)({},n),{},{type:"label",children:e.labels&&e.labels.map((function(t){return Object(v.jsxs)("div",{className:"filterOption","data-id":t.id,children:[t.name,Object(v.jsx)(h.a,{className:"del-icon",onClick:function(t){return function(t){return O.apply(this,arguments)}(parseInt(t.target.closest(".filterOption").dataset.id))}})]},"filterOption-".concat(t.id))}))})),Object(v.jsx)(w,{text:"Add Label",onAdd:function(t){return b.apply(this,arguments)}})]})},J=function(){var t=Object(a.useState)({}),e=Object(u.a)(t,2),n=e[0],c=e[1],r=Object(a.useState)({type:"all"}),s=Object(u.a)(r,2),i=s[0],j=s[1];function b(){return f.apply(this,arguments)}function f(){return(f=Object(l.a)(o.a.mark((function t(){var e,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:5000/db");case 2:return e=t.sent,t.next=5,e.json();case 5:return n=t.sent,t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(a.useEffect)((function(){var t=function(){var t=Object(l.a)(o.a.mark((function t(){var e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b();case 2:e=t.sent,c(e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[]),Object(v.jsxs)("div",{className:"App",children:[Object.keys(n).length>0&&Object(v.jsx)(F,{data:n,setFilterState:j}),Object(v.jsxs)("div",{style:{width:"100%",margin:"0 160px"},children:[Object(v.jsx)("h1",{children:"Tasks Tracker"}),Object.keys(n).length>0?Object(v.jsx)(T,{data:n,filterState:i}):Object(v.jsx)(d.b,{id:"loading-icon"})]})]})};s.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(J,{})}),document.getElementById("root")),document.onload=function(){return alert("test")}}},[[31,1,2]]]);
//# sourceMappingURL=main.d3a49a70.chunk.js.map