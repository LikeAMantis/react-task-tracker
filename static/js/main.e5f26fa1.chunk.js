(this["webpackJsonpreact-task-tracker"]=this["webpackJsonpreact-task-tracker"]||[]).push([[0],{28:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(10),i=n.n(r),s=(n(28),n(9)),o=n.n(s),l=n(11),d=n(5),j=n(17),u=n(7),b=n(23),O=n(2),f=n(16),h=n(22),p=n(13),x=n(21),m=n(19),k=n(3),v=Object(a.forwardRef)((function(e,t){var n=e.taskData,c=e.onDelete,r=e.onEdit,i=e.attributes,s=e.listeners,o=e.style,l=Object(a.useState)(n.text),j=Object(d.a)(l,2),u=j[0],b=j[1];return Object(k.jsxs)("div",{className:"taskContainer",ref:t,style:o,children:[Object(k.jsx)(f.a,Object(O.a)(Object(O.a)({className:"dragHandle"},s),i)),Object(k.jsx)("div",{className:"checkbox",onClick:function(){return r(Object(O.a)(Object(O.a)({},n),{},{done:!n.done}))},children:n.done&&Object(k.jsx)(m.a,{style:{color:"red"}})}),Object(k.jsx)("input",{className:"task",style:n.done?{textDecorationLine:"line-through",color:"grey"}:null,value:u,onChange:function(e){return b(e.target.value)},onBlur:function(){return r(Object(O.a)(Object(O.a)({},n),{},{text:u}))},onKeyDown:function(e){return function(e){"Enter"!==e.code&&"Escape"!==e.code||e.target.blur()}(e)}}),Object(k.jsx)(p.a,{className:"del-icon",onClick:function(e){e.stopPropagation(),c(n.id)}})]})})),y=n(8),g=n(4),C=function(e){var t=Object(y.d)({id:e.taskData.id}),n=t.attributes,a=t.listeners,c=t.setNodeRef,r=t.transform,i=t.transition,s={transform:g.a.Transform.toString(r),transition:i};return Object(k.jsx)(v,Object(O.a)(Object(O.a)({ref:c},e),{},{style:e.isDragged?Object(O.a)(Object(O.a)({},s),{},{background:"lightgrey"}):s,attributes:n,listeners:a}))},N=n(20),S=function(e){var t=e.onAdd,n=e.text,c=e.style,r=Object(a.useState)(""),i=Object(d.a)(r,2),s=i[0],o=i[1],l=Object(a.useState)(!1),j=Object(d.a)(l,2),u=j[0],b=j[1];function O(){t(s),o(""),b(!1)}return Object(k.jsx)(k.Fragment,{children:u?Object(k.jsxs)("div",{className:"edit",children:[Object(k.jsx)("input",{ref:function(e){return e&&e.focus()},onKeyDown:function(e){return function(e){"Enter"===e.code?(O(),b(!1)):"Escape"===e.code&&b(!1)}(e)},onChange:function(e){o(e.target.value)},value:s,placeholder:n}),Object(k.jsxs)("div",{children:[Object(k.jsx)("button",{className:"save-btn",onClick:O,children:"Save"}),Object(k.jsx)("button",{onClick:function(){return b(!1)},children:"Cancel"})]})]}):Object(k.jsx)("div",{className:"add-btn",style:c,children:Object(k.jsxs)("span",{onClick:function(){return b(!0)},children:[Object(k.jsx)(N.a,{}),n]})})})},E=function(e){var t=e.tasksCategorie,n=e.onEdit,a=e.onClose,c=e.wrapper,r=e.colors;return i.a.createPortal(Object(k.jsx)("div",{className:"colorPicker",style:{left:c.getBoundingClientRect().left+"px",top:c.getBoundingClientRect().top+20+"px"},ref:function(e){return e&&e.focus()},tabIndex:"0",onClick:function(e){return function(e){e.stopPropagation(),e.target.hasAttribute("title")&&(n(Object(O.a)(Object(O.a)({},t),{},{color:parseInt(e.target.dataset.id)})),a(!1))}(e)},onBlur:function(){return a(!1)},children:r.map((function(e){return Object(k.jsx)("div",{title:e.name,"data-id":e.id,style:{background:"var(--".concat(e.name,")")}},"color-".concat(e.id))}))}),document.body)},D=function(e){var t=e.labels,n=e.onClose,a=e.onEdit,c=e.tasksCategorie;return Object(k.jsxs)("div",{className:"labelPicker",style:{position:"relative",background:"black"},ref:function(e){return e&&e.focus()},tabIndex:"0",onClick:function(e){return function(e){e.stopPropagation();var t=e.target.dataset.id;t=null!=t&&parseInt(e.target.dataset.id),a(Object(O.a)(Object(O.a)({},c),{},{label:t})),n(!1)}(e)},onBlur:function(){return n(!1)},children:[Object(k.jsx)("div",{children:"none"}),t.map((function(e){return Object(k.jsx)("div",{"data-id":e.id,children:e.name},"label-".concat(e.id))}))]})},w=n(6),T=function(e){var t=e.tasksCategorie,n=e.tasksData,c=e.onDelete,r=e.onEdit,i=e.colors,s=e.labels,j=Object(a.useState)(n),b=Object(d.a)(j,2),m=b[0],N=b[1],T=Object(a.useState)(!1),A=Object(d.a)(T,2),M=A[0],I=A[1],L=Object(a.useState)(!1),P=Object(d.a)(L,2),B=P[0],F=P[1],J=Object(a.useState)(!1),R=Object(d.a)(J,2),K=R[0],G=R[1],H=Object(a.useState)(t.name),U=Object(d.a)(H,2),z=U[0],W=U[1],q=Object(a.useRef)(),Q=Object(a.useRef)(),V=Object(a.useState)(null),X=Object(d.a)(V,2),Y=X[0],Z=X[1],$=Object(w.o)(Object(w.n)(w.e),Object(w.n)(w.d,{coordinateGetter:y.c})),_=Object(y.d)({id:t.id}),ee=_.attributes,te=_.listeners,ne=_.setNodeRef,ae=_.transform,ce=_.transition,re={transform:g.a.Translate.toString(ae),transition:ce};function ie(){return(ie=Object(l.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://my-json-server.typicode.com/LikeAMantis/react-task-tracker/tasks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e){N(m.map((function(t){return t.id===e.id?e:t}))),fetch("https://my-json-server.typicode.com/LikeAMantis/react-task-tracker/tasks/".concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}function oe(e){fetch("https://my-json-server.typicode.com/LikeAMantis/react-task-tracker/tasks/".concat(e),{method:"DELETE"}),N(m.filter((function(t){return t.id!==e})))}function le(){0===z.length?alert("Enter a Name!"):(r(Object(O.a)(Object(O.a)({},t),{},{name:z})),I(!1))}function de(){0===z.length?alert("Enter a Name!"):(I(!1),W(q.current))}function je(e){Z(e.active.id)}function ue(e){var t=e.active,n=e.over;if(t.id!==n.id){var a=m.findIndex((function(e){return e.id===t.id})),c=m.findIndex((function(e){return e.id===n.id}));N(Object(y.b)(m,a,c))}Z(null)}return Object(k.jsx)("div",{ref:ne,style:Object(O.a)({},re),children:Object(k.jsxs)("div",{className:"categoryWrapper",style:{background:"var(--".concat(i.find((function(e){return e.id===t.color})).name,")")},children:[Object(k.jsx)(f.a,Object(O.a)(Object(O.a)(Object(O.a)({className:"dragHandle"},te),ee),{},{tabIndex:"false"})),Object(k.jsxs)("div",{className:"editCategory-container",ref:Q,children:[Object(k.jsx)(h.a,{className:"colorPicker-btn",onClick:function(){return F(!0)},tabIndex:"0"}),B&&Object(k.jsx)(E,{tasksCategorie:t,onEdit:r,onClose:F,wrapper:Q.current,colors:i}),Object(k.jsx)(p.a,{className:"del-icon",onClick:function(){c(t.id),I(!1)}})]}),M?Object(k.jsxs)("div",{children:[Object(k.jsx)("input",{ref:function(e){return e&&e.focus()},placeholder:"New Category",onKeyDown:function(e){return function(e){"Enter"===e.code?(r(Object(O.a)(Object(O.a)({},t),{},{name:z})),I(!1)):"Escape"===e.code&&I(!1)}(e)},onChange:function(e){return W(e.target.value)},value:z,style:{height:"1.5em",width:"96%"}}),Object(k.jsxs)("div",{className:"btnContainer",children:[Object(k.jsx)("button",{className:"save-btn",onClick:le,children:"Save"}),Object(k.jsx)("button",{onClick:de,children:"Cancel"})]})]}):Object(k.jsx)("h2",{className:"categoryTitle",onClick:function(){I(!0),q.current=z},children:t.name}),Object(k.jsx)("div",{className:"tasks",children:m.length>0?Object(k.jsxs)(w.a,{sensors:$,collisionDetection:w.f,onDragEnd:ue,onDragStart:je,children:[Object(k.jsx)(y.a,{items:m,strategy:y.e,children:m.map((function(e){return Object(k.jsx)(C,{taskData:e,onEdit:se,onDelete:oe,isDragged:Y===e.id},"task-".concat(e.id))}))}),Object(k.jsx)(w.b,{style:{background:"inherit"},children:Y?Object(k.jsx)(v,{taskData:m.find((function(e){return e.id===Y}))}):null})]}):Object(k.jsx)("p",{children:"Tasks"})}),Object(k.jsx)("div",{className:"label",onClick:function(){return G(!0)},children:K?Object(k.jsx)(D,{tasksCategorie:t,onEdit:r,onClose:G,labels:s}):function(){var e=s.find((function(e){return e.id===t.label}));return null!=e?Object(k.jsx)("span",{children:e.name}):Object(k.jsx)(x.a,{className:"label-btn"})}()}),Object(k.jsx)(S,{onAdd:function(e){var n={tasksCategorieId:t.id,done:!1,text:e,id:Math.ceil(1e4*Math.random())};N([].concat(Object(u.a)(m),[n])),function(e){ie.apply(this,arguments)}(n)},text:"Add Task"})]})})},A=function(e){var t=e.data,n=e.filterState,c=Object(a.useState)(t.tasksCategories),r=Object(d.a)(c,2),i=r[0],s=r[1],o=Object(w.o)(Object(w.n)(w.e),Object(w.n)(w.d,{coordinateGetter:y.c}));function l(e){fetch("https://my-json-server.typicode.com/LikeAMantis/react-task-tracker/tasksCategories/".concat(e),{method:"DELETE"}),s(i.filter((function(t){return t.id!==e})))}function j(e){s(i.map((function(t){return t.id===e.id?e:t}))),fetch("https://my-json-server.typicode.com/LikeAMantis/react-task-tracker/tasksCategories/".concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}function O(e){var t=e.active,n=e.over;if(t.id!==n.id){var a=i.findIndex((function(e){return e.id===t.id})),c=i.findIndex((function(e){return e.id===n.id}));s(Object(y.b)(i,a,c))}}return Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)("div",{className:"TaskCategoriesContainer",children:[Object(k.jsx)("div",{className:"flexContainer",children:i.length>0?Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(w.a,{sensors:o,collisionDetection:w.f,onDragEnd:O,children:Object(k.jsx)(y.a,{items:i,children:i.filter((function(e){return e[n.type]===n.value})).map((function(e){return Object(k.jsx)(T,{tasksCategorie:e,tasksData:t.tasks.filter((function(t){return t.tasksCategorieId===e.id})),onDelete:l,onEdit:j,colors:t.colors,labels:t.labels},"Categorie-".concat(e.id))}))})})}):"No Categories added yet!"}),Object(k.jsx)("hr",{size:"1",width:"90%",color:"black"}),Object(k.jsxs)("div",{id:"addCategory",onClick:function(){var e={name:"New",color:1,label:!1,id:Math.ceil(1e4*Math.random())};"all"!==n.type&&(e[n.type]=n.value),s([].concat(Object(u.a)(i),[e])),fetch("https://my-json-server.typicode.com/LikeAMantis/react-task-tracker/tasksCategories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})},children:[Object(k.jsx)(b.a,{}),Object(k.jsx)("span",{children:"Add Category"})]})]})})},M=n(14),I=function(e){var t=e.type,n=e.children,a=e.setFilterState;return Object(k.jsxs)("section",{children:[Object(k.jsx)("h3",{style:{background:"black",color:"white"},children:t+"'s"}),Object(k.jsx)("div",{onClick:function(e){return function(e){var n=e.target.dataset.id;void 0!==n&&a({type:t,value:parseInt(n)})}(e)},children:n})]})},L=["data"],P=function(e){var t=e.data,n=Object(M.a)(e,L),c=Object(a.useState)(!1),r=Object(d.a)(c,2),i=r[0],s=r[1];return Object(k.jsxs)("div",{className:"sideBar",expanded:i?"true":"false",children:[Object(k.jsxs)("div",{className:"sideBar-header",onClick:function(){return s(!i)},children:[Object(k.jsx)(j.a,{}),Object(k.jsx)("span",{children:"Filter"})]}),Object(k.jsx)("div",{className:"filterOption-wrapper",active:"all"===n.filterState.type?"true":"false",children:Object(k.jsx)("div",{className:"filterOption",style:{marginBottom:"15px"},onClick:function(){return n.setFilterState({type:"all"})},children:"All"})}),Object(k.jsx)(I,Object(O.a)(Object(O.a)({},n),{},{type:"color",children:t.colors&&t.colors.map((function(e){return Object(k.jsx)("div",{className:"filterOption-wrapper",active:"color"===n.filterState.type&&n.filterState.value===e.id?"true":"false",children:Object(k.jsx)("div",{className:"filterOption",style:{background:"var(--".concat(e.name,")"),color:"black"},"data-id":e.id,children:e.name})},"colorFilter-".concat(e.id))}))})),Object(k.jsx)(I,Object(O.a)(Object(O.a)({},n),{},{type:"label",children:t.labels&&t.labels.map((function(e){return Object(k.jsx)("div",{className:"filterOption-wrapper",active:"label"===n.filterState.type&&n.filterState.value===e.id?"true":"false",children:Object(k.jsxs)("div",{className:"filterOption","data-id":e.id,children:[e.name,Object(k.jsx)(p.a,{className:"del-icon",onClick:function(e){return a=parseInt(e.target.closest(".filterOption").dataset.id),fetch("https://my-json-server.typicode.com/LikeAMantis/react-task-tracker/labels/".concat(a),{method:"DELETE"}),void n.setData(Object(O.a)(Object(O.a)({},t),{},{labels:t.labels.filter((function(e){return e.id!==a}))}));var a}})]})},"labelFilter-".concat(e.id))}))})),Object(k.jsx)(S,{text:"Add Label",onAdd:function(e){var a={name:e,id:Math.ceil(1e4*Math.random())};n.setData(Object(O.a)(Object(O.a)({},t),{},{labels:[].concat(Object(u.a)(t.labels),[a])})),fetch("https://my-json-server.typicode.com/LikeAMantis/react-task-tracker/labels",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})}})]})},B=function(){var e=Object(a.useState)({}),t=Object(d.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)({type:"all"}),i=Object(d.a)(r,2),s=i[0],u=i[1];function b(){return O.apply(this,arguments)}function O(){return(O=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://my-json-server.typicode.com/LikeAMantis/react-task-tracker/db");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){var e=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(k.jsxs)("div",{className:"App",children:[Object.keys(n).length>0&&Object(k.jsx)(P,{data:n,setData:c,setFilterState:u,filterState:s}),Object(k.jsxs)("div",{style:{width:"100%"},children:[Object(k.jsx)("h1",{children:"Tasks Tracker"}),Object.keys(n).length>0?Object(k.jsx)(A,{data:n,filterState:s}):Object(k.jsx)(j.b,{id:"loading-icon"})]})]})};i.a.render(Object(k.jsx)(c.a.StrictMode,{children:Object(k.jsx)(B,{})}),document.getElementById("root")),document.onload=function(){return alert("test")}}},[[31,1,2]]]);
//# sourceMappingURL=main.e5f26fa1.chunk.js.map